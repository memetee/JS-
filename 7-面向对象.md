## 面向对象是现实的抽象方式

对象是JavaScript中一个非常重要的概念，这是因为对象可以将多个相关联的数据封装到一起，更好的描述一个事物：

- 比如我们可以描述一辆车：Car，具有颜色（color）、速度（speed）、品牌（brand）、价格（price），行驶（travel）等 等；
- 比如我们可以描述一个人：Person，具有姓名（name）、年龄（age）、身高（height），吃东西（eat）、跑步（run） 等等；

用对象来描述事物，更有利于我们将现实的事物，抽离成代码中某个数据结构：

- 所以有一些编程语言就是纯面向对象的编程语言，比Java；
- 你在实现任何现实抽象时都需要先创建一个类，根据类再去创建对象；

![image-20220613074220876](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074220876.png)



## JavaScript的面向对象

JavaScript其实支持多种编程范式的，包括函数式编程和面向对象编程：

- JavaScript中的对象被设计成一组属性的无序集合，像是一个哈希表，有key和value组成；
- key是一个标识符名称，value可以是任意类型，也可以是其他对象或者函数类型；
- 如果值是一个函数，那么我们可以称之为是对象的方法；

如何创建一个对象呢？

- 早期使用创建对象的方式最多的是使用Object类，并且使用new关键字来创建一个对象：
- 这是因为早期很多JavaScript开发者是从Java过来的，它们也更习惯于Java中通过new的方式创建一个对象；
- 后来很多开发者为了方便起见，都是直接通过字面量的形式来创建对象：
- 这种形式看起来更加的简洁，并且对象和属性之间的内聚性也更强，所以这种方式后来就流行了起来；



## 创建对象的两种方式

![image-20220613074402851](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074402851.png)

![image-20220613074413936](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074413936.png)



## 对属性操作的控制

在前面我们的属性都是直接定义在对象内部，或者直接添加到对象内部的：

- 但是这样来做的时候我们就不能对这个属性进行一些限制：比如这个属性是否是可以通过delete删除的？这个 属性是否在for-in遍历的时候被遍历出来呢？

![image-20220613074447200](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074447200.png)



如果我们想要对一个属性进行比较精准的操作控制，那么我们就可以使用属性描述符。

- 通过属性描述符可以精准的添加或修改对象的属性；
- 属性描述符需要使用 Object.defineProperty 来对属性进行添加或者修改；



## Object.defineProperty

Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此 对象。

![image-20220613074532486](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074532486.png)

可接收三个参数：

- obj要定义属性的对象；
- prop要定义或修改的属性的名称或 Symbol；
- descriptor要定义或修改的属性描述符；

返回值：

- 被传递给函数的对象， 会修改原对象。

![image-20220613074608275](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074608275.png)

第三个参数就是一个属性描述符上面为什么没有呢？

因为height是不可枚举的



## 属性描述符分类

属性描述符的类型有两种：

- 数据属性（Data Properties）描述符（Descriptor）；
- 存取属性（Accessor访问器 Properties）描述符（Descriptor）；

![image-20220613074651735](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074651735.png)



## 数据属性描述符

数据数据描述符有如下四个特性：[[Configurable]]：

表示属性是否可以通过 delete删除属性，是否可以修改它的特性，或者是否可以将它修改为存取属性 描述符；

- 当我们直接在一个对象上定义某个属性时，这个属性的[[Configurable]]为true；
- 当我们通过属性描述符定义一个属性时，这个属性的[[Configurable]]默认为false；

[[Enumerable]]：表示属性是否可以通过for-in或者Object.keys()返回该属性；

- 当我们直接在一个对象上定义某个属性时，这个属性的[[Enumerable]]为true；
- 当我们通过属性描述符定义一个属性时，这个属性的[[Enumerable]]默认为false；

[[Writable]]：表示是否可以修改属性的值；

- 当我们直接在一个对象上定义某个属性时，这个属性的[[Writable]]为true；
- 当我们通过属性描述符定义一个属性时，这个属性的[[Writable]]默认为false；

[[value]]：属性的value值，读取属性时会返回该值，修改属性时，会对其进行修改；

- 默认情况下这个值是undefined；

```js
let obj = {
    name: 'wts',
    age: 18
}
Object.definedProperty(obj, 'address', {
    value: '北京市',
    configurable: false    //不可配置
})
delete obj.name   //允许的
delete obj.adress    //是不允许

Object.defineProperty(obj, 'address', {
    value: '广州市',
    configurable: true
})    //这里是在修改address，但是上面的配置是不允许修改，所以这里是不行的， 不可以重新定义属性描述符了
```

```js


let obj = {
    name: 'wts',
    age: 18
}
Object.definedProperty(obj, 'address', {
    value: '北京市',
    configurable: false，    //不可配置
    enumerable: false    //不可枚举
})

//这里是遍历不到的
for(let key in obj){
    console.log(key)    //是拿不到北京市的
}
Object.keys(obj)        //这里是拿不到北京市的

如果enumerable是true的话，是可以拿到北京市的
```

```js
let obj = {
    name: 'wts',
    age: 18
}
Object.definedProperty(obj, 'address', {
    value: '北京市',
    configurable: false，    //不可配置
    enumerable: false    //不可枚举
        writable: false    //不可写的
})
obj.address = '深圳市'
console.log(obj.address)    //北京市，没有修改掉
```

```js
let obj = {
    name: 'wts',
    age: 18
}
Object.definedProperty(obj, 'address', {})

这里用了属性描述符，但是什么都没写，那么
configurable: false
enumerable: false
writable: false
value: undefined
这些事默认值

let obj = {
    name: 'wts',
    age: 18
}
如果没有使用属性描述符，那么默认值是什么呢
value: wts(赋值的value)
configurable: true
enumerable: true
writable: true
```



## 默认情况下这个值是undefined；

![image-20220613074944841](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074944841.png)



![image-20220613074958654](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613074958654.png)



![image-20220613075011757](D:\studyMaterial\JS高级\笔记\8面向对象\image-20220613075011757.png)



## 存取属性描述符

存取属性描述符有如下四个特性：

- [[Configurable]]：表示属性是否可以通过delete删除属性，是否可以修改它的特性，或者是否可以将它修改为存取属性 描述符；
  - 和数据属性描述符是一致的；
  - 当我们直接在一个对象上定义某个属性时，这个属性的[[Configurable]]为true；
  - 当我们通过属性描述符定义一个属性时，这个属性的[[Configurable]]默认为false；
- [[Enumerable]]：表示属性是否可以通过for-in或者Object.keys()返回该属性；
  - 和数据属性描述符是一致的；
  - 当我们直接在一个对象上定义某个属性时，这个属性的[[Enumerable]]为true；
  - 当我们通过属性描述符定义一个属性时，这个属性的[[Enumerable]]默认为false；
- [[get]]：获取属性时会执行的函数。默认为undefined
- [[set]]：设置属性时会执行的函数。默认为undefined



